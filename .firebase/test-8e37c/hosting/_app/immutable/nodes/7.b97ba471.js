import{V as ne,U as ae,W as oe,K as se,w as re,e as ie}from"../chunks/firebase.bc1fd833.js";import{H as ce}from"../chunks/control.f5b05b5f.js";import{s as le,F as ue,g as y,c as T,l as A,G as me,h as U,d as H,i as $,m as C,k as j,B as F,H as de}from"../chunks/scheduler.37b8a958.js";import{S as fe,i as he,d as V,q as J,v as _e,e as b,g as d,n as _,a as Q,s as X,b as q,c as pe,t as G,j as ge,k as ve,m as be,l as we,h as ke}from"../chunks/index.e829ca3c.js";import{U as ee,g as Ee,a as Pe}from"../chunks/UserLink.a20264fb.js";function Y(t,e){if(isNaN(t)||t<400||t>599)throw new Error(`HTTP error status codes must be between 400 and 599 â€” ${t} is invalid`);return new ce(t,e)}new TextEncoder;const ye=async({params:t})=>{var s,a;const e=ne(ie,"users"),l=ae(e,se("username","==",t.username),oe(1)),u=await re(l),f=(s=u.docs[0])==null?void 0:s.exists(),n=(a=u.docs[0])==null?void 0:a.data();if(!f)throw Y(404,"that user does not exist!");if(!n.published)throw Y(403,`The profile of @${n.username} is not public!`);return{username:n.username,photoURL:n.photoURL,bio:n.bio,links:n.links??[]}},Te=Object.freeze(Object.defineProperty({__proto__:null,load:ye},Symbol.toStringTag,{value:"Module"})),L="src/routes/[username]/+page.svelte";function Z(t,e,l){const u=t.slice();return u[1]=e[l],u}function I(t){let e,l;const u=[t[1]];let f={};for(let s=0;s<u.length;s+=1)f=ue(f,u[s]);e=new ee({props:f,$$inline:!0});const n={c:function(){ge(e.$$.fragment)},l:function(a){ve(e.$$.fragment,a)},m:function(a,p){be(e,a,p),l=!0},p:function(a,p){const E=p&1?Ee(u,[Pe(a[1])]):{};e.$set(E)},i:function(a){l||(q(e.$$.fragment,a),l=!0)},o:function(a){G(e.$$.fragment,a),l=!1},d:function(a){we(e,a)}};return V("SvelteRegisterBlock",{block:n,id:I.name,type:"each",source:"(24:4) {#each data.links as item}",ctx:t}),n}function K(t){let e,l,u,f,n,s,a,p=t[0].username+"",E,B,h,x,M,w,R=(t[0].bio??"no bio yet...")+"",S,N,v,g;document.title=e="@"+t[0].username+" Links";let k=J(t[0].links),r=[];for(let m=0;m<k.length;m+=1)r[m]=I(Z(t,k,m));const te=m=>G(r[m],1,1,()=>{r[m]=null}),W={c:function(){l=y("meta"),f=T(),n=y("main"),s=y("h1"),a=A("@"),E=A(p),B=T(),h=y("img"),M=T(),w=y("p"),S=A(R),N=T(),v=y("ul");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l:function(i){const c=me("svelte-1ui6vuc",document.head);l=U(c,"META",{name:!0,content:!0}),c.forEach(b),f=H(i),n=U(i,"MAIN",{class:!0});var o=$(n);s=U(o,"H1",{class:!0});var P=$(s);a=C(P,"@"),E=C(P,p),P.forEach(b),B=H(o),h=U(o,"IMG",{src:!0,alt:!0,width:!0,class:!0}),M=H(o),w=U(o,"P",{class:!0});var z=$(w);S=C(z,R),z.forEach(b),N=H(o),v=U(o,"UL",{class:!0});var D=$(v);for(let O=0;O<r.length;O+=1)r[O].l(D);D.forEach(b),o.forEach(b),this.h()},h:function(){d(l,"name","description"),d(l,"content",u=t[0].bio),j(l,L,9,2,162),d(s,"class","text-7xl text-purple-500"),j(s,L,13,2,277),F(h.src,x=t[0].photoURL??"/user.png")||d(h,"src",x),d(h,"alt","photoURL"),d(h,"width","256"),d(h,"class","mx-auto"),j(h,L,17,2,351),d(w,"class","text-xl my-8"),j(w,L,24,2,465),d(v,"class","list-none"),j(v,L,25,2,526),d(n,"class","prose text-center mx-auto mt-8"),j(n,L,12,0,228)},m:function(i,c){_(document.head,l),Q(i,f,c),Q(i,n,c),_(n,s),_(s,a),_(s,E),_(n,B),_(n,h),_(n,M),_(n,w),_(w,S),_(n,N),_(n,v);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(v,null);g=!0},p:function(i,[c]){if((!g||c&1)&&e!==(e="@"+i[0].username+" Links")&&(document.title=e),(!g||c&1&&u!==(u=i[0].bio))&&d(l,"content",u),(!g||c&1)&&p!==(p=i[0].username+"")&&X(E,p),(!g||c&1&&!F(h.src,x=i[0].photoURL??"/user.png"))&&d(h,"src",x),(!g||c&1)&&R!==(R=(i[0].bio??"no bio yet...")+"")&&X(S,R),c&1){k=J(i[0].links);let o;for(o=0;o<k.length;o+=1){const P=Z(i,k,o);r[o]?(r[o].p(P,c),q(r[o],1)):(r[o]=I(P),r[o].c(),q(r[o],1),r[o].m(v,null))}for(ke(),o=k.length;o<r.length;o+=1)te(o);pe()}},i:function(i){if(!g){for(let c=0;c<k.length;c+=1)q(r[c]);g=!0}},o:function(i){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)G(r[c]);g=!1},d:function(i){i&&(b(f),b(n)),b(l),de(r,i)}};return V("SvelteRegisterBlock",{block:W,id:K.name,type:"component",source:"",ctx:t}),W}function Ue(t,e,l){let{$$slots:u={},$$scope:f}=e;_e("Page",u,[]);let{data:n}=e;t.$$.on_mount.push(function(){n===void 0&&!("data"in e||t.$$.bound[t.$$.props.data])&&console.warn("<Page> was created without expected prop 'data'")});const s=["data"];return Object.keys(e).forEach(a=>{!~s.indexOf(a)&&a.slice(0,2)!=="$$"&&a!=="slot"&&console.warn(`<Page> was created with unknown prop '${a}'`)}),t.$$set=a=>{"data"in a&&l(0,n=a.data)},t.$capture_state=()=>({UserLink:ee,data:n}),t.$inject_state=a=>{"data"in a&&l(0,n=a.data)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),[n]}class He extends fe{constructor(e){super(e),he(this,e,Ue,K,le,{data:0}),V("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:K.name})}get data(){throw new Error("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(e){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{He as component,Te as universal};
