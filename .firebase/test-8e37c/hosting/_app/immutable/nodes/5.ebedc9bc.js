import{s as ae,v as V,r as J,g as w,c as C,l as ne,h as R,z as N,d as P,i as E,m as oe,k as U,B as K}from"../chunks/scheduler.37b8a958.js";import{S as le,i as ie,d as A,v as re,j as ce,k as ue,m as fe,b as me,t as pe,l as de,e as p,g as r,a as L,n as y,p as he}from"../chunks/index.e829ca3c.js";import{A as te}from"../chunks/AuthCheck.af040952.js";import{u as F,c as I,d as Q,e as W,D as X,p as Y,g as Z,r as $,f as ee}from"../chunks/firebase.bc1fd833.js";const k="src/routes/login/photo/+page.svelte";function q(o){let e,i="Uploading...",u,s;const t={c:function(){e=w("p"),e.textContent=i,u=C(),s=w("progress"),this.h()},l:function(c){e=R(c,"P",{["data-svelte-h"]:!0}),N(e)!=="svelte-be0b5h"&&(e.textContent=i),u=P(c),s=R(c,"PROGRESS",{class:!0}),E(s).forEach(p),this.h()},h:function(){U(e,k,46,8,1470),r(s,"class","progress progress-info w-56 mt-6"),U(s,k,47,8,1499)},m:function(c,d){L(c,e,d),L(c,u,d),L(c,s,d)},d:function(c){c&&(p(e),p(u),p(s))}};return A("SvelteRegisterBlock",{block:t,id:q.name,type:"if",source:"(43:6) {#if uploading}",ctx:o}),t}function se(o){let e,i="Upload a Profile Photo",u,s,t,a,c,d,m,_,D="Pick a file",l,h,S,x,g,B,O,M,f=o[2]&&q(o);const z={c:function(){e=w("h2"),e.textContent=i,u=C(),s=w("form"),t=w("div"),a=w("img"),d=C(),m=w("label"),_=w("span"),_.textContent=D,l=C(),h=w("input"),S=C(),f&&f.c(),x=C(),g=w("a"),B=ne("Finish"),this.h()},l:function(n){e=R(n,"H2",{class:!0,["data-svelte-h"]:!0}),N(e)!=="svelte-1whglfv"&&(e.textContent=i),u=P(n),s=R(n,"FORM",{class:!0});var v=E(s);t=R(v,"DIV",{class:!0});var b=E(t);a=R(b,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),d=P(b),m=R(b,"LABEL",{for:!0,class:!0});var H=E(m);_=R(H,"SPAN",{class:!0,["data-svelte-h"]:!0}),N(_)!=="svelte-1xba4c3"&&(_.textContent=D),H.forEach(p),l=P(b),h=R(b,"INPUT",{name:!0,type:!0,class:!0,accept:!0}),S=P(b),f&&f.l(b),b.forEach(p),v.forEach(p),x=P(n),g=R(n,"A",{href:!0,class:!0});var T=E(g);B=oe(T,"Finish"),T.forEach(p),this.h()},h:function(){var n;r(e,"class","card-title"),U(e,k,24,2,754),K(a.src,c=o[1]??((n=o[0])==null?void 0:n.photoURL)??"/user.png")||r(a,"src",c),r(a,"alt","photoURL"),r(a,"width","256"),r(a,"height","256"),r(a,"class","mx-auto"),U(a,k,28,6,929),r(_,"class","label-text"),U(_,k,36,8,1153),r(m,"for","photoURL"),r(m,"class","label"),U(m,k,35,6,1107),r(h,"name","photoURL"),r(h,"type","file"),r(h,"class","file-input file-input-bordered w-full max-w-xs"),r(h,"accept","image/png, image/jpeg, image/gif, image/webp"),U(h,k,38,6,1220),r(t,"class","form-control w-full max-w-xs my-10 mx-auto text-center"),U(t,k,27,4,853),r(s,"class","max-w-screen-md w-full"),U(s,k,26,2,810),r(g,"href",o[3]),r(g,"class","btn btn-primary"),U(g,k,52,2,1594)},m:function(n,v){L(n,e,v),L(n,u,v),L(n,s,v),y(s,t),y(t,a),y(t,d),y(t,m),y(m,_),y(t,l),y(t,h),y(t,S),f&&f.m(t,null),L(n,x,v),L(n,g,v),y(g,B),O||(M=he(h,"change",o[4],!1,!1,!1,!1),O=!0)},p:function(n,v){var b;v&3&&!K(a.src,c=n[1]??((b=n[0])==null?void 0:b.photoURL)??"/user.png")&&r(a,"src",c),n[2]?f||(f=q(n),f.c(),f.m(t,null)):f&&(f.d(1),f=null),v&8&&r(g,"href",n[3])},d:function(n){n&&(p(e),p(u),p(s),p(x),p(g)),f&&f.d(),O=!1,M()}};return A("SvelteRegisterBlock",{block:z,id:se.name,type:"slot",source:"(21:0) <AuthCheck>",ctx:o}),z}function G(o){let e,i;e=new te({props:{$$slots:{default:[se]},$$scope:{ctx:o}},$$inline:!0});const u={c:function(){ce(e.$$.fragment)},l:function(t){ue(e.$$.fragment,t)},m:function(t,a){fe(e,t,a),i=!0},p:function(t,[a]){const c={};a&79&&(c.$$scope={dirty:a,ctx:t}),e.$set(c)},i:function(t){i||(me(e.$$.fragment,t),i=!0)},o:function(t){pe(e.$$.fragment,t),i=!1},d:function(t){de(e,t)}};return A("SvelteRegisterBlock",{block:u,id:G.name,type:"component",source:"",ctx:o}),u}function ge(o,e,i){let u,s,t;V(F,"user"),J(o,F,l=>i(5,s=l)),V(I,"userData"),J(o,I,l=>i(0,t=l));let{$$slots:a={},$$scope:c}=e;re("Page",a,[]);let d,m=!1;async function _(l){i(2,m=!0);const h=l.target.files[0];i(1,d=URL.createObjectURL(h));const S=$(Q,`users/${s.uid}/profile.png`),x=await ee(S,h),g=await Z(x.ref);await Y(X(W,"users",s.uid),{photoURL:g}),i(2,m=!1)}const D=[];return Object.keys(e).forEach(l=>{!~D.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&console.warn(`<Page> was created with unknown prop '${l}'`)}),o.$capture_state=()=>({AuthCheck:te,user:F,userData:I,storage:Q,db:W,doc:X,updateDoc:Y,getDownloadURL:Z,ref:$,uploadBytes:ee,previewURL:d,uploading:m,upload:_,href:u,$user:s,$userData:t}),o.$inject_state=l=>{"previewURL"in l&&i(1,d=l.previewURL),"uploading"in l&&i(2,m=l.uploading),"href"in l&&i(3,u=l.href)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),o.$$.update=()=>{o.$$.dirty&1&&i(3,u=`/${t==null?void 0:t.username}/edit`)},[t,d,m,u,_]}class Re extends le{constructor(e){super(e),ie(this,e,ge,G,ae,{}),A("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:G.name})}}export{Re as component};
